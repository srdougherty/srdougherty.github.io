<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Python List Comprehension</title>
    <style>
        .exercise {
            margin: 50px;
        }
        
        [data-datacamp-exercise] {
            visibility: hidden;
        }
    </style>

    <script src="https://cdn.datacamp.com/datacamp-light-latest.min.js"></script>
</head>

<body>
    <h1>リスト内包（ないほう）</h1>

    <p>リスト内包では、短縮されたシンタックスで既存のリスト値をもとに新規リストを作成できます。</p>
    
    <p>
    例：<br>
    果物のリストをもとに、果物の名前に "a" が含まれる値のみで新しいリストを作成したいです。<br>
    リスト内包を使わなければ、<code>for</code> ループの中に <code>if</code>文を利用しないと行けません。
    </p>

    <div class="exercise">
        <div class="title">
            <h2>リスト内包を<u>利用しない</u>場合</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                fruits = ["apple", "banana", "cherry", "kiwi", "mango"]
                newlist = []
                
                for x in fruits:
                  if "a" in x:
                    newlist.append(x)
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>

    <p>リスト内包を使ったら、１行で収めます。</p>

    <div class="exercise">
        <div class="title">
            <h2>リスト内包を<u>利用する</u>場合</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                fruits = ["apple", "banana", "cherry", "kiwi", "mango"]

                newlist = [x for x in fruits if "a" in x]
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>

    <hr>
    <h2>シンタックス</h2>

    <code>新リスト = [ 式文 for 項目 in <i>iterable</i> if 条件 == True ]</code>

    <p>リターン値が新しいリストで、もとのリストが変更されません。</p>

    
    <hr>
    <h3>条件</h3>

    <p>条件は <code>True</code> となる項目のみを受け入れるフィルターのようなものです。</p>

    <div class="exercise">
        <div class="title">
            <h2>"apple" 以外の値のみ受け入れる</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                fruits = ["apple", "banana", "cherry", "kiwi", "mango"]

                newlist = [x for x in fruits if x != "apple"]
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>

    <p>
        <code>if x != "apple"</code> の条件は "apple" 以外の値で <code>True</code> となるので<br>
        新しいリストは "apple" を除いて全果物を含むことになります。
    </p>

    <p>条件はオプションなので省略できます。</p>
    
    <div class="exercise">
        <div class="title">
            <h2>条件なしの例</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                fruits = ["apple", "banana", "cherry", "kiwi", "mango"]

                newlist = [x for x in fruits]
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>

    
    <hr>
    <h3>Iterable</h3>

    <p>Iterableはリスト、タプル(tuple)、セットなど集合的データ構造（コレクションあるいはコンテナ）の各要素に対する繰り返し処理できるものです。</p>

    <div class="exercise">
        <div class="title">
            <h2><code>range()</code> で iterable の作成</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                newlist = [x for x in range(10)]
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>

    <div class="exercise">
        <div class="title">
            <h2><code>range()</code> と条件の組み合わせ</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                newlist = [x for x in range(10) if x < 5]
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>

    
    <hr>
    <h3>式文</h3>

    <p>式文は繰り返し処理の現在項目で、リストに追加され前に変更できます。</p>

    <div class="exercise">
        <div class="title">
            <h2>新リストの値を大文字にする</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                fruits = ["apple", "banana", "cherry", "kiwi", "mango"]

                newlist = [x.upper() for x in fruits]
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>
    
    <p>式文にはなんでも設定可能です。</p>

    <div class="exercise">
        <div class="title">
            <h2>新リストの値を全部 "hello" に設定する</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                fruits = ["apple", "banana", "cherry", "kiwi", "mango"]

                newlist = ['hello' for x in fruits]
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>
    
    <p>式文も条件を含めるが、フィルターではなく出力を変化させるためです。</p>

    <div class="exercise">
        <div class="title">
            <h2>"banana" の代わりに "orange" を返す</h2>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                fruits = ["apple", "banana", "cherry", "kiwi", "mango"]

                newlist = [x if x != "banana" else "orange" for x in fruits]
                
                print(newlist)
            </code>
            <code data-type="solution"></code>
            <code data-type="sct"></code>
        </div>
    </div>
    
    <p>
        上記例の式文は<br>
        現在項目が「banana」でなければ、<br>
        そのまま返すが、「banana」であれば、「orange」を返す<br>
        と解読します。
    </p>
    
    <hr>
    <h2>例題</h2>

    <div class="exercise">
        <div class="title">
            <h2>例題１</h2>
            <p>リスト内包を利用して、1 から 9 までの数字のリストを作成してプリントする。</p>
        </div>

        <div data-datacamp-exercise data-lang="python" data-height="auto">
            <code data-type="pre-exercise-code"></code>
            <code data-type="sample-code">
                newlist = 
                
                print(newlist)
            </code>
            <code data-type="solution">
                newlist = [x for x in range(1, 10)]

                print(newlist)
            </code>
            <code data-type="sct">
                Ex().check_list_comp(0).multi(
                    check_iter().has_equal_value(),
                    check_body().multi(set_context(x=x).has_equal_value() for x in range(1,10))
                )
            </code>
            <div data-type="hint">
                Iterable is <code>range</code>
            </div>
        </div>
    </div>

    <p>※本チュートリアルの内容は、W3Schools の<a href="https://www.w3schools.com/python/python_lists_comprehension.asp">チュートリアル</a>を参考に作成しました。</p>
</body>

</html>